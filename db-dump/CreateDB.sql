-- SQL PARA CREAR LA BD
DROP DATABASE IF EXISTS ProyectoP1BDA;
CREATE DATABASE ProyectoP1BDA;
USE ProyectoP1BDA;

DROP TABLE IF EXISTS Survey;
CREATE TABLE Survey(
	id INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
    name VARCHAR(55) NOT NULL,
    description TEXT NOT NULL
);

DROP TABLE IF EXISTS Question;
CREATE TABLE Question(
	id INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
    question VARCHAR(55) NOT NULL,
    type VARCHAR(20) NOT NULL
);

DROP TABLE IF EXISTS Answer;
CREATE TABLE Answer(
	id INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
    answer VARCHAR(255) NOT NULL
);

DROP TABLE IF EXISTS Survey_Question;
CREATE TABLE Survey_Question(
	id_Survey INT NOT NULL,
	id_Question INT NOT NULL,
    
    FOREIGN KEY (id_Survey) REFERENCES Survey(id) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (id_Question) REFERENCES Question(id) ON DELETE CASCADE ON UPDATE CASCADE 
);


DROP TABLE IF EXISTS Question_Answer;
CREATE TABLE Question_Answer(
	id_Question INT NOT NULL,
	id_Answer INT NOT NULL,
    
	FOREIGN KEY (id_Question) REFERENCES Question(id) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (id_Answer) REFERENCES Answer(id) ON DELETE CASCADE ON UPDATE CASCADE
);